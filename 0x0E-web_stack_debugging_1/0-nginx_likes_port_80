#!/bin/bash

# Ensure the system is updated
apt update && apt install -y nginx

# Ensure Nginx starts on boot
systemctl enable --now nginx

# Allow port 80 through the firewall
ufw allow 80/tcp || echo "Firewall not active, skipping rule addition"

# Configure Nginx to listen on all IPv4 interfaces
cat > /etc/nginx/sites-available/default <<EOL
server {
    listen 80;
    server_name _;
    root /var/www/html;
    index index.html;
}
EOL

# Reload Nginx to apply changes
nginx -t && systemctl restart nginx
